# ============ 主服务配置 ============

# 数据库连接URL（留空使用本地SQLite）
# PostgreSQL: DATABASE_URL="postgres://user:password@host:5432/dbname?sslmode=require"
# MySQL: DATABASE_URL="mysql://user:password@host:3306/dbname"
DATABASE_URL=""

# OpenAI 风格 API Key 白名单（仅用于授权，与账号无关）
# 多个用逗号分隔，例如：OPENAI_KEYS="key1,key2,key3"
# 留空则为开发模式，不校验 Authorization
OPENAI_KEYS=""

# Token 计数倍率（影响 /v1/messages/count_tokens 和 /v1/messages 的输入 token 统计）
# 默认值为 1.0，可根据实际需要调整（如设置为 1.5 表示返回 1.5 倍的 token 数）
TOKEN_COUNT_MULTIPLIER="1.0"

# 出错次数阈值，超过此值自动禁用账号
MAX_ERROR_COUNT=100

# 请求失败重试次数（换账号重试）
# 设置为 0 禁用重试
MAX_RETRY_COUNT=3

# HTTP代理设置（留空不使用代理）
# 例如：HTTP_PROXY="http://127.0.0.1:7890"
HTTP_PROXY=""

# 管理控制台开关（默认启用）
# 设置为 "false" 或 "0" 可禁用管理控制台和相关API端点
ENABLE_CONSOLE="true"

# 管理控制台登录密码（默认 "admin"）
# 用于访问管理控制台的密码，会话有效期为30天
ADMIN_PASSWORD="admin"

# 主服务端口（默认 8000）
PORT=8000

# ============ 调试选项 ============

# 启用消息转换调试日志（默认 false）
# 设置为 "true" 时，会输出详细的 Claude 到 Amazon Q 消息转换日志
# 用于排查工具调用无限循环等问题
DEBUG_MESSAGE_CONVERSION="false"

# ============ Lazy Account Pool (虚拟号池) ============

# 是否启用虚拟号池 (true/false)
# 启用后，聊天和刷新将只从未禁用的账号中选择一个子集进行操作
LAZY_ACCOUNT_POOL_ENABLED="false"

# 虚拟号池大小 (用于聊天请求)
# 从排序后的账号中选择前 N 个作为聊天候选池
LAZY_ACCOUNT_POOL_SIZE=20

# 虚拟号池刷新偏移量
# 刷新任务将考虑 "虚拟号池大小 + 偏移量" 的账号
LAZY_ACCOUNT_POOL_REFRESH_OFFSET=10

# 虚拟号池排序字段
# 可选值: created_at, id, success_count
LAZY_ACCOUNT_POOL_ORDER_BY="created_at"

# 虚拟号池是否降序排序 (true/false)
# 虚拟号池是否降序排序 (true/false) -> false表示按创建时间升序，优先用老号
LAZY_ACCOUNT_POOL_ORDER_DESC="false"